model Template {
  id               String            @id @default(cuid())
  name             String            @map("template_name")
  description      String            @map("description")
  fields           Field[]
  createdAt        DateTime          @default(now()) @map("created_at")
  updatedAt        DateTime          @updatedAt @map("updated_at")
  isCustom         Boolean           @default(true) @map("is_custom")
  userTemplates    UserTemplate[]
  @@map("templates")
}

model Field {
  id          String    @id @default(cuid())
  name        String    @map("field_name")
  description String    @map("field_description")
  template    Template? @relation(fields: [templateId], references: [id])
  templateId  String?   @map("template_id")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@map("fields")
}

model UserTemplate {
  id               String           @id @default(cuid())
  userId           String           @map("user_id")
  templateId       String           @map("template_id")
  user             User             @relation(fields: [userId], references: [id])
  template         Template         @relation(fields: [templateId], references: [id])
  createdAt        DateTime         @default(now()) @map("created_at")
  sessionDocuments SessionDocument[]

  @@map("user_templates")
}

model SessionDocument {
  id             String        @id @default(cuid())
  content        String        @map("content")
  createdAt      DateTime      @default(now()) @map("created_at")
  updatedAt      DateTime      @updatedAt @map("updated_at")
  sessionId      String        @map("session_id")
  session        Session       @relation(fields: [sessionId], references: [id])
  userTemplateId String        @map("user_template_id")
  userTemplate   UserTemplate  @relation(fields: [userTemplateId], references: [id])
  @@map("session_documents")
}
